{% extends "site/__base.html" %}

{% block stylesheets %}
  {{ block.super }}
  {% load static %}
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.2/css/bootstrap-select.min.css">
  <link rel="stylesheet" href="{% static 'schedulingcalendar/css/default.css' %}" />
  <link rel="stylesheet" href="{% static 'schedulingcalendar/css/default.time.css' %}" />
{% endblock stylesheets %}

{% block content %}
  <div class="container">
    <div class="row">
      <!-- Employee Info -->
      <div class="col-md-4">
        <h2>General Information</h2>
        <ul class="nav nav-tabs">
          <!-- Tabs -->
          <li class="active"><a href="#info-tab" data-toggle="tab">Information</a></li>
          <li><a href="#department-tab" data-toggle="tab">Departments</a></li>
        </ul>
      
        <div class="tab-content">
          <!-- Info -->
          <div class="tab-pane active" id="info-tab">
            <form id="update-employee-form"
                  name= "UpdateEmployeeForm"
                  action="{% url 'schedulingcalendar:employee_info' employee.id %}"
                  method="post">
              {% csrf_token %}
              {% for field in form %}
                <div class="form-group">
                  {{ field.errors }}
                  {{ field.label_tag }} {{ field }}
                  {% if field.help_text %}
                    <p class="help">{{ field.help_text|safe }}</p>
                  {% endif %}
                </div>
              {% endfor %}
              <input type="submit" value="Save Changes">
            </form>
          </div>
          <!-- Departments -->
          <div class="tab-pane" id="department-tab">
            <a href="{% url 'schedulingcalendar:dep_mem_create' employee.id %}">New Department Membership</a>
            <ul class="list-group">
            {% for department_mem in department_mem_list %}
              <li class="list-group-item">
                <ul class="list-inline" data-department-mem-id="{{ department_mem.id }}">
                  <li>{{ department_mem.department }}</li>
                  <li>Priority: {{ department_mem.priority }}</li>
                  <li>Seniority: {{ department_mem.seniority }}</li>
                  <li><a href="{% url 'schedulingcalendar:dep_mem_update' employee.id department_mem.id %}">Edit</a></li>
                  <li><a href="{% url 'schedulingcalendar:dep_mem_delete' employee.id department_mem.id %}">Delete</a></li>
                </ul>
              </li>
            </ul>
            {% endfor %}
          </div>
        </div>
      </div>
      <!-- Employee Availabilities -->
      <div class="col-md-8">
        <h2>Availability</h2>
        <ul class="nav nav-tabs">
          <!-- Tabs -->
          <li class="active"><a href="#vacation-tab" data-toggle="tab">Vacations</a></li>
          <li><a href="#repeat-unavailability-tab" data-toggle="tab">Repeat Unavailability</a></li>
          <li><a href="#desired-times-tab" data-toggle="tab">Desired Times</a></li>
        </ul>
        
        <div class="tab-content ">
          <!-- Vacations -->
          <div class="tab-pane active" id="vacation-tab">
            <a href="{% url 'schedulingcalendar:vacation_create' employee.id %}">New Vacation</a>
            <ul class="list-group">
              {% for vacation in vacation_list %}
                <li class="list-group-item">
                  <ul class="list-inline" data-vacation-id="{{ vacation.id }}">
                    <li>{{ vacation.start_datetime }} - {{ vacation.end_datetime }}</li>
                    <li><a href="{% url 'schedulingcalendar:vacation_update' employee.id vacation.id %}">Edit Vacation</a></li>
                    <li><a href="{% url 'schedulingcalendar:vacation_delete' employee.id vacation.id %}">Delete Vacation</a></li>
                  </ul>
                </li>
              {% endfor %}
            </ul>
          </div>
            
          <div class="tab-pane" id="repeat-unavailability-tab">
            <a href="{% url 'schedulingcalendar:repeat_unav_create' employee.id %}">New Repeat Unavailability</a>
            <ul class="list-group">
              {% for repeat_unav in repeating_unavailable_list %}
                <li class="list-group-item">
                  <ul class="list-inline" data-vacation-id="{{ vacation.id }}">
                    <li>{{ repeat_unav.start_time }} - {{ repeat_unav.end_time }}</li>
                    <li><a href="{% url 'schedulingcalendar:repeat_unav_update' employee.id repeat_unav.id %}">Edit Repeat Unavailability</a></li>
                    <li><a href="{% url 'schedulingcalendar:repeat_unav_delete' employee.id repeat_unav.id %}">Delete Repeat Unavailability</a></li>
                  </ul>
                </li>
              {% endfor %}
            </ul>
          </div>
            
          <div class="tab-pane" id="desired-times-tab">
            <a href="{% url 'schedulingcalendar:desired_time_create' employee.id %}">New Desired Time</a>
              <ul class="list-group">
                {% for desired_time in desired_time_list %}
                  <li class="list-group-item">
                    <ul class="list-inline" data-desired-time-id="{{ desired_time.id }}">
                      <li>{{ desired_time.start_time }} - {{ desired_time.end_time }}</li>
                      <li><a href="{% url 'schedulingcalendar:desired_time_update' employee.id desired_time.id %}">Edit Desired Time</a></li>
                      <li><a href="{% url 'schedulingcalendar:desired_time_delete' employee.id desired_time.id %}">Delete Desired Time</a></li>
                    </ul>
                  </li>
                {% endfor %}
              </ul>
            </div>
          </div> 
        </div>
      </div>
    </div>
  </div>
{% endblock content %}

{% block javascript %}
  {{ block.super }}     
  <script src="{% static 'schedulingcalendar/js/picker.js' %}" ></script>
  <script src="{% static 'schedulingcalendar/js/picker.time.js' %}" ></script>
  <script src="{% static 'schedulingcalendar/js/employees.js' %}" ></script>
{% endblock javascript %}    